# Copilot Instructions
- Project is a single-page synthwave Pong clone built in vanilla HTML/CSS/JS; all logic, styling, and UI live in [index.html](index.html). No build system or deps—open the file or serve with a static server (e.g., `python3 -m http.server 8000`).
- Menus and HUD overlays (main menu, pause, game over, leaderboard) are static DOM sections toggled via `hidden` class; keep existing IDs when adding UI so event hooks remain valid [index.html#L351-L401](index.html#L351-L401).
- Canvas always fills the viewport; `setupCanvas` resizes on `window.resize` and also adjusts `#gameContainer`. Keep new elements relative to that container to avoid clipping [index.html#L472-L488](index.html#L472-L488).
- Audio is minimalist Web Audio beeps controlled by the `SoundSystem` helper; reuse it instead of adding `<audio>` tags [index.html#L405-L450](index.html#L405-L450).
- `PongGame` orchestrates state: canvas setup/resizing, input wiring, game loop, and scoreboard [index.html#L454-L470](index.html#L454-L470). It keeps mode (`singleplayer` vs `local`), pause, and scores; starts at 0:0 and ends when a player reaches 11 [index.html#L526-L607](index.html#L526-L607).
- `startGame` resets score, paddles, timers, overlay visibility, and initializes ball/power-up storage; reuse it for any new modes so HUD and timers stay consistent [index.html#L526-L566](index.html#L526-L566).
- Controls: keyboard uses W/S or Arrow Up/Down; `Escape` toggles pause; mouse moves paddle in active games; touch is split top/bottom for P1/P2. Mobile detection gates mouse move handling [index.html#L489-L523](index.html#L489-L523).
- Update control hints and mode label when adding input schemes—the strings are set in `startGame` for mobile vs desktop [index.html#L531-L552](index.html#L531-L552).
- Game loop runs every frame via `requestAnimationFrame`, calling `updateGame` then `draw`; avoid blocking work in these paths [index.html#L624-L889](index.html#L624-L889).
- Scoring flow: `updateScore` increments, plays audio, checks for 11, then `endGame` shows overlay and optionally adds a “NEW RECORD” marker when topping the leaderboard [index.html#L567-L607](index.html#L567-L607).
- Leaderboard persists in `localStorage` under `pongLeaderboard`; `addToLeaderboard` sorts and trims to top 20, `updateLeaderboardDisplay` rebuilds the DOM list. Provide migration if changing stored shape [index.html#L607-L745](index.html#L607-L745) and [index.html#L1052-L1079](index.html#L1052-L1079).
- Physics/entities: `Ball` handles wall bounces and renders glow [index.html#L896-L924](index.html#L896-L924); `Paddle` stores movement speed and collision angle deflection [index.html#L927-L969](index.html#L927-L969). Keep ball speed capped when adding new impulses [index.html#L664-L744](index.html#L664-L744).
- `resetBall` re-centers with randomized launch angle, speed 4, and clears `secondBall`; call it for any scoring or round transition to avoid stale velocity [index.html#L811-L826](index.html#L811-L826).
- Power-ups spawn every `powerUpSpawnInterval` (300 frames) with 30% chance; types: `speedUp` (temporary velocity boost), `shrinkPaddle` (temporary height reduction on the struck side), `multiBall` (spawns `secondBall` for 4s). UI indicator cleared via timeouts—preserve these when altering durations [index.html#L554-L826](index.html#L554-L826).
- Visual flair: `Particle` sparks on hits and power-ups [index.html#L1019-L1044](index.html#L1019-L1044); grid background and neon styling drawn each frame in `draw`/`drawGrid` [index.html#L830-L889](index.html#L830-L889).
- Rendering order: paddles/balls/power-ups/particles draw after center line; respect this if adding new entities to keep glow layering intact [index.html#L834-L889](index.html#L834-L889).
- Input handling sets `touchY` on move and uses top/bottom split for local multiplayer; changes to touch logic should keep that split for parity [index.html#L503-L520](index.html#L503-L520).
- Online play is placeholder only; `onlineButton` is disabled and intercepted to no-op—keep it inert unless implementing netcode [index.html#L341-L373](index.html#L341-L373) and [index.html#L1078-L1085](index.html#L1078-L1085).
- Style direction: neon magenta/cyan palette, Orbitron font, gradients/shadows; match existing CSS patterns when adding elements [index.html#L1-L340](index.html#L1-L340).
